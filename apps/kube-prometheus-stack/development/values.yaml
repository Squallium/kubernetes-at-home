grafana:
  enabled: false

alertmanager:
  enabled: false

kubeStateMetrics:
  enabled: false

nodeExporter:
  enabled: false

prometheusOperator:
  enabled: true

prometheus:
  enabled: true

  prometheusSpec:

    # ðŸ”¥ Solo descubrir ServiceMonitor/PodMonitor en home-assistant
    serviceMonitorNamespaceSelector:
      matchNames:
        - home-assistant

    podMonitorNamespaceSelector:
      matchNames:
        - home-assistant

    # Solo usar los ServiceMonitor que tÃº crees
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false

    # Muy poca retenciÃ³n local (no queremos almacenar)
    retention: 12h

    storageSpec:
      volumeClaimTemplate:
        spec:
          accessModes: ["ReadWriteOnce"]
          storageClassName: microk8s-hostpath
          resources:
            requests:
              storage: 2Gi

    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi

    # ðŸ›° Remote write hacia core
    remoteWrite:
      - url: http://prometheus.internal/api/v1/write
        writeRelabelConfigs:
          - sourceLabels: [__name__]
            regex: (.*)
            targetLabel: cluster
            replacement: dev
            action: replace