grafana:
  enabled: true
  ingress:
    enabled: true
    ingressClassName: public
    hosts:
      - grafana.internal
    annotations:
      nginx.ingress.kubernetes.io/rewrite-target: /
    path: /
    pathType: Prefix
  adminPassword: admin  # ponlo en un Secret en producci√≥n
  persistence:
    enabled: true
    storageClassName: microk8s-hostpath
    accessModes: [ "ReadWriteOnce" ]
    size: 5Gi
  initChownData:
    enabled: false
  additionalDataSources:
    - name: Loki
      type: loki
      uid: loki-datasource
      url: http://loki.loki.svc.cluster.local:3100/
      access: proxy
      isDefault: false


prometheus:
  ingress:
    enabled: true
    ingressClassName: public
    hosts:
      - prometheus.internal
    paths:
      - /
    pathType: Prefix

  prometheusSpec:
    enableRemoteWriteReceiver: true

    scrapeClasses:
      - default: true
        name: cluster-relabeling
        relabelings:
          - sourceLabels: [ __name__ ]
            regex: (.*)
            targetLabel: cluster
            replacement: core
            action: replace

    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false
    retention: 7d

    storageSpec:
      volumeClaimTemplate:
        spec:
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 10Gi
          storageClassName: "microk8s-hostpath"

    additionalScrapeConfigs:
      - job_name: 'macmini'
        scrape_interval: 15s
        static_configs:
          - targets: [ '192.168.1.183:9100' ] # IP del Mac Mini en tu LAN

      - job_name: 'rog_laptop'
        scrape_interval: 15s
        static_configs:
          - targets:
            - '192.168.1.146:9182' # IP de tu ROG en la LAN
            - '192.168.1.187:9182' # IP de tu ROG en la WiFi
      - job_name: 'mini_pc'
        scrape_interval: 15s
        static_configs:
          - targets:
            -  '192.168.1.177:9182' # IP del Mini PC en la LAN


alertmanager:
  alertmanagerSpec:
    storage:
      volumeClaimTemplate:
        spec:
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 2Gi
          storageClassName: "microk8s-hostpath"
